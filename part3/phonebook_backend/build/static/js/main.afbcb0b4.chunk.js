(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(16),a=t.n(c),o=t(3),r=t(2),u=t(0),i=function(e){var n=e.filter,t=e.onFilterChange;return Object(u.jsxs)("div",{children:["filter shown with: ",Object(u.jsx)("input",{value:n,onChange:t})]})},s=function(e){var n=e.newName,t=e.newNumber,c=e.handleNameChange,a=e.handleNumberChange,o=e.handleSubmit;return Object(u.jsxs)("form",{onSubmit:o,children:[Object(u.jsxs)("div",{children:["name:"," ",Object(u.jsx)("input",{value:n,onChange:c,placeholder:"name"})]}),Object(u.jsxs)("div",{children:["number:"," ",Object(u.jsx)("input",{value:t,onChange:a,placeholder:"number"})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var n=e.person,t=e.handleDlete;return Object(u.jsxs)("li",{className:"person",children:[n.name," ",n.number,Object(u.jsx)("button",{onClick:t,children:"delete"})]},n.name)},d=function(e){var n=e.message,t=e.type;return null===n?null:Object(u.jsx)("div",{className:t,children:n})},b=t(4),m=t.n(b),h="/api/persons",j={getAll:function(){return m.a.get(h)},create:function(e){return m.a.post(h,e)},update:function(e,n){return m.a.put("".concat(h,"/").concat(e),n)},remove:function(e){return m.a.delete("".concat(h,"/").concat(e))}},f=function(){var e=Object(r.useState)([{name:"Arto Hellas",number:"040-123456",id:1},{name:"Ada Lovelace",number:"39-44-5323523",id:2},{name:"Dan Abramov",number:"12-43-234345",id:3},{name:"Mary Poppendieck",number:"39-23-6423122",id:4}]),n=Object(o.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),b=Object(o.a)(a,2),m=b[0],h=b[1],f=Object(r.useState)(""),p=Object(o.a)(f,2),O=p[0],g=p[1],v=Object(r.useState)(""),x=Object(o.a)(v,2),w=x[0],C=x[1],N=Object(r.useState)({message:null,type:"success"}),y=Object(o.a)(N,2),k=y[0],S=y[1];Object(r.useEffect)((function(){j.getAll().then((function(e){c(e.data)})).catch((function(e){console.log(e)}))}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(d,{message:k.message,type:k.type}),Object(u.jsx)(i,{filter:w,onFilterChange:function(e){C(e.target.value)}}),Object(u.jsx)("h3",{children:"add a new"}),Object(u.jsx)(s,{newName:m,newNumber:O,handleNameChange:function(e){h(e.target.value)},handleNumberChange:function(e){g(e.target.value)},handleSubmit:function(e){e.preventDefault();var n={name:m,number:O},a=t.find((function(e){return e.name===m}));if(a){if(window.confirm("".concat(m," is already added to phonebook, replace the old number with a new one?"))){var o=a.id;j.update(o,n).then((function(e){c(t.map((function(n){return n.id!==o?n:e.data}))),S({message:"Added ".concat(m)}),setTimeout((function(){S({message:null})}),5e3)})).catch((function(e){S({message:"Information of ".concat(m," has already been removed from server"),type:"error"})}))}}else j.create(n).then((function(e){c(t.concat(e.data))})).catch((function(e){console.log(e)})),S({message:"Added ".concat(m)}),setTimeout((function(){S({message:null})}),5e3);h(""),g("")}}),Object(u.jsx)("h3",{children:"Numbers"}),t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())})).map((function(e){return Object(u.jsx)(l,{person:e,handleDlete:function(){return function(e){var n=t.find((function(n){return n.id===e}));console.log(n),window.confirm("Delete ".concat(n.name,"?"))&&(c(t.filter((function(n){return n.id!==e}))),j.remove(e).then((function(e){console.log(e)})).catch((function(e){console.log(e)})))}(e.id)}},e.id)}))]})};t(40);a.a.render(Object(u.jsx)(f,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.afbcb0b4.chunk.js.map